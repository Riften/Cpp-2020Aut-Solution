---
layout: post
filename: 2020-09-28-c25-lab02
title: C25 Lab02
date: 2020-09-28 00:00:00 +0800
categories: post
tags:
  - CS171
  - Lab
mathjax: false
---

### 第1关：编写成绩转换程序

```cpp
#include <iostream>

using namespace std;

int main() {
	// 请添加你的代码
    /*** Begin ***/
    int n;
    cin >> n;
    switch(n/10) {
        case 10:
        case 9:
            cout << 'A';
            break;
        case 8:
            cout << 'B';
            break;
        case 7:
            cout << 'C';
            break;
        case 6:
            cout << 'D';
            break;
        default :
            cout << 'E';
    }
    /**** End ****/
	return 0;
}
```

### 第2关：停车收费系统

```cpp
#include <iostream>

using namespace std;

int main() {
	// 请添加你的代码
    /*** Begin ***/
    char car;
    int start, end, time;
    cin >> car >> start >> end;
    time = end - start;
    switch (car)
    {
        case 'c':
            if (time <= 3) {
                cout << 5 * time << "\n";
            } else {
                cout << 5 * 3 + 10 * (time - 3) << "\n";
            }
            break;
        case 'b':
            if (time <= 2) {
                cout << 10 * time << "\n";
            } else {
                cout << 10 * 2 + 15 * (time - 2) << "\n";
            }
            break;
        case 't':
            if (time <= 1) {
                cout << 10 * time << "\n";
            } else {
                cout << 10 * 1 + 15 * (time - 1) << "\n";
            }
            break;
    }
    /**** End ****/
	return 0;
}
```

### 第3关：判断回文数

```cpp
#include <iostream>

using namespace std;

int main() {
	// 请添加你的代码
    /*** Begin ***/
    char a, b, c, d, e;
    cin >> a >> b >> c >> d >> e;
    if (a==e && b==d) {
        cout << "Yes";
    } else {
        cout << "No";
    }
    /**** End ****/
	return 0;
}
```

### 第4关：计算电费（纠错题）

```cpp
#include <iostream>

using namespace std;

int main() {
    // 变量定义：
    // - quantity: 所用电量（度）
    // - charge: 所需电费（元）
    // - yuan: 需要1元硬币数量
    // - jiao：需要1角硬币数量
    int quantity, yuan, jiao;
    int charge;
    
    cin >> quantity;              // 输入用电量
    charge = 6*quantity;          // 计算电费
    yuan = charge / 10;           // 计算需要几个1元硬币
    jiao = charge % 10;           // 计算需要几个1角硬币

    cout  << yuan << ' ' << jiao;   // 输出
    return 0;
}
```

### 第5关：更复杂的计算电费（附加题）

**解法1：通过字符类型输入**

题干中明确说明了输入的格式，即`a.b`，这时可以直接用三个`char`类型变量进行输入，单独对个位和小数位进行计算和处理。
```cpp
#include <iostream>

using namespace std;

int main() {
	// 请添加你的代码
    /*** Begin ***/
    char a, _, b;
    int charge;
    cin >> a >> _ >> b;
    charge = ((a - '0') * 10 + (b - '0')) * 6; // 电费，单位为分
    cout << charge / 100 << ' ' 
         << charge % 100 / 10 << ' ' 
         << charge % 10;
    /**** End ****/
	return 0;
}
```

**解法2：通过人为扩大浮点数防止类型转换造成误差**

本题中造成类型转换产生误差的原因在于浮点数无法精确存储一些十进制的有理数，同时在自动类型转换到整型的过程中，浮点数的小数部分会被直接截断而不是四舍五入，截断过程大大放大了浮点数的误差，从而造成转换到的整型也有误差。

解法2利用这个特性防止整型误差。在本题中，当以 “分” 为单位计算电费时，即使使用浮点数存储电费，其最终结果也接近整数。

在这个情况下，我们只需要在实际的电费基础上加上一个很小的数，就能在不改变整数部分值的前提下防止自动类型转换的截断带来的误差。

```cpp
#include <iostream>

using namespace std;

int main() {
	// 请添加你的代码
    /*** Begin ***/
    double quantity, charge;
    cin >> quantity;
    charge = quantity * 60; // 以分作为电费单位
    charge += 0.001;        // 加上一个很小的数防止截断小数位带来的误差
    cout << (int)charge / 100 << ' ' 
         << (int)charge % 100 / 10 << ' ' 
         << (int)charge % 10;
    /**** End ****/
	return 0;
}
```