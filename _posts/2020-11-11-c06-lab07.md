---
layout: post
filename: 2020-11-11-c06-lab07
title: C06 Lab07
date: 2020-11-11 00:00:00 +0800
categories: post
tags:
  - CS171
  - Lab
mathjax: false
---

## 第1关：查找子串（改错题）

```cpp
#include <iostream>

using namespace std;

int find(char str[1000], char subStr[100]);

int main(int argc, char const *argv[])
{
    char str[1000], subStr[100];
    int m = 0, n = 0;
    while ((str[m] = cin.get()) != '\n') m++;
    while ((subStr[n] = cin.get()) != '\n') n++;
    str[m] = '\0';
    subStr[n] = '\0';
    cout << find(str, subStr);
    return 0;
}

int find(char s1[1000], char s2[100]) {
    for (int i = 0; s1[i] != '\0'; i++) {
        int j = 0, k = i;
        while (s2[j] != '\0' && s1[k] != '\0' && s2[j] == s1[k]) {
            j++;
            k++;
        }
        if (s2[j] == '\0') {
            return i;
        }
    }
    return -1;
}
```

## 第2关：进制转换

```cpp
void intConvert(int n, int base) {
    char res[100];
    int i = 0;
    int num;
    if(n==0) {
        cout << '0';
        return;
    }
    while(n > 0) {
        num = n % base;
        if (num > 9) {
            res[i++] = 'A' + num-10;
        } else {
            res[i++] = '0' + num;
        }
        n/=base;
    }
    for (int j=i-1; j>-1; j--) {
        cout << res[j];
    }
}
```

## 第3关：约瑟夫问题
### 普通遍历写法
直接模拟报数过程，用一个数组维护每个人的存活状况。

```cpp
int josephus(int n, int m) {
    bool isDead[10000] = {0};
    int counter = 0;
    int current = 0;
    int dead = 0;
    while(dead < n-1) {
        if(!isDead[current]) {
            counter ++ ;
            if (counter % m == 0) {
                dead ++;
                isDead[current] = 1;
                counter = 0;
            }
        }
        current = (current + 1) % n;
    }
    for(int i=0; i<n; i++) {
        if (!isDead[i]) {
            return i;
        }
    }
    return -1;
}
```

### 递归写法
```cpp
int josephus(int n, int m) {
    return n==1 ? 0 : (josephus(n-1,m)+m)%n;
}
```

## 第4关：分数计算器
```cpp
#include <iostream>
#include "frac.h"
using namespace std;

void printFrac(int num, int den) {
  cout << num << " / " << den << endl;
}

/*** Your code here ***/
int abs(int n) {
    return n<0 ? -n : n;
}

int gcd(int m, int n) {
  if (m == 0) {
    return n;
  }
  return gcd(n % m, m);
}

void simplify(int num, int den) {
  if (num == 0) {
    den = 1;
  } else {
    // 求最大公约数
    int d = gcd(abs(num), abs(den));
    num /= d;
    den /= d;
    
    // 将负号放在分子上
    num = num * den < 0 ? -abs(num) : abs(num);
    den = abs(den);
  }
  // 输出
  printFrac(num, den);
}

void add(int num1, int den1, int num2, int den2) {
  int num = num1 * den2 + num2 * den1;
  int den = den1 * den2;
  simplify(num, den);
}

void sub(int num1, int den1, int num2, int den2) {
  int num = num1 * den2 - num2 * den1;
  int den = den1 * den2;
  simplify(num, den);
}

void mul(int num1, int den1, int num2, int den2) {
  int num = num1 * num2;
  int den = den1 * den2;
  simplify(num, den);
}

void div(int num1, int den1, int num2, int den2) {
  int num = num1 * den2;
  int den = den1 * num2;
  simplify(num, den);
}
/******** End *********/
```

## 第5关：奶茶店找零

```cpp
#include "func.h"

bool drinkChange(int n, int cash[]) {
/*** Your code here ***/
    int changes[2] = {0,0}; // store the number of $5 $10
                            // $20 would not be used as change
    for (int i=0; i<n; i++){
        switch(cash[i]) {
        case 5:
            changes[0]+=1;
            break;
        case 10:
            if(changes[0]<1) {
                // running out of $5
                return false;
            }
            changes[0]-=1;
            changes[1]+=1;
            break;
        case 20:
            if(changes[1] < 1) {
                // Use $10 first.
                if(changes[0]<3) {
                    return false;
                } else {
                    changes[0] -= 3;
                }
            } else {
                if(changes[0] < 1) {
                    return false;
                } else {
                    changes[0]-=1;
                    changes[1]-=1;
                }
            }
        }
    }
    return true;
/******** End *********/
}
```